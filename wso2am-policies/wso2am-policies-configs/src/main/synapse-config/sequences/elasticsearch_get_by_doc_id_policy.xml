<?xml version="1.0" encoding="UTF-8"?>
<sequence name="elasticsearch_get_by_doc_id_policy" trace="disable" xmlns="http://ws.apache.org/ns/synapse">
    <property expression="get-property('uri.var.{{docIdPathVariable}}')" name="DOC_ID" scope="default" type="STRING"/>
    <property name="NEW_URL" scope="default" type="STRING" value="/_doc/doc_id"/>
    <rewrite inProperty="NEW_URL" outProperty="NEW_URL">
        <rewriterule>
            <action fragment="path" regex="doc_id" type="replace" xpath="get-property('DOC_ID')"/>
        </rewriterule>
    </rewrite>
    <property expression="get-property('NEW_URL')" name="REST_URL_POSTFIX" scope="axis2" type="STRING"/>
</sequence>
